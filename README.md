---
title: Uk Ner Presidio Demo
emoji: üëÅ
colorFrom: green
colorTo: pink
sdk: gradio
sdk_version: 4.14.0
app_file: app.py
pinned: false
---
# Ukrainian NER + Presidio Demo

–£–∫—Ä–∞—ó–Ω—Å—å–∫–∞ —Å–∏—Å—Ç–µ–º–∞ –≤–∏—è–≤–ª–µ–Ω–Ω—è —Ç–∞ –∞–Ω–æ–Ω—ñ–º—ñ–∑–∞—Ü—ñ—ó –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–∏—Ö –¥–∞–Ω–∏—Ö. –ì—ñ–±—Ä–∏–¥–Ω–∏–π –∞–Ω–∞–ª—ñ–∑–∞—Ç–æ—Ä –ø–æ—î–¥–Ω—É—î —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–µ—Ä–Ω—É NER-–º–æ–¥–µ–ª—å —Ç–∞ rule-based —Ä–æ–∑–ø—ñ–∑–Ω–∞–≤–∞—á—ñ Microsoft Presidio, –∞ –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—ó –ø–æ—Å—Ç–∞—á–∞—î—Ç—å—Å—è Gradio UI.

## –û—Å–Ω–æ–≤–Ω—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ
- –ì—ñ–±—Ä–∏–¥–Ω–∏–π `HybridAnalyzer`: –∫–æ–æ—Ä–¥–∏–Ω—É—î Ukrainian NER (`dchaplinsky/uk_ner_web_trf_13class`) —Ç–∞ Presidio pattern recognizers, –∑–∞—Å—Ç–æ—Å–æ–≤—É—î —Å—Ç—Ä–∞—Ç–µ–≥—ñ—ó —Ä–æ–∑–≤'—è–∑–∞–Ω–Ω—è –∫–æ–Ω—Ñ–ª—ñ–∫—Ç—ñ–≤ (–∑–∞ score –∞–±–æ –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç–æ–º) —ñ —Å–∞–Ω—ñ—Ç–∏–∑—É—î –¥—ñ–∞–ø–∞–∑–æ–Ω–∏ —Å—É—Ç–Ω–æ—Å—Ç–µ–π –ø–µ—Ä–µ–¥ –∞–Ω–æ–Ω—ñ–º—ñ–∑–∞—Ü—ñ—î—é.
- Presidio Anonymizer –∑ –∫–∞—Å—Ç–æ–º–Ω–∏–º —Ñ–æ—Ä–º–∞—Ç–æ–º –ø—ñ–¥—Å—Ç–∞–Ω–æ–≤–∫–∏ (`[ENTITY_TYPE]`) —ñ –º–æ–∂–ª–∏–≤—ñ—Å—Ç—é —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è —á–µ—Ä–µ–∑ –∫–æ–Ω—Ñ—ñ–≥.
- Gradio UI –∑ –ø–∞—Ä–∞–ª–µ–ª—å–Ω–∏–º –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è–º ¬´–í—Ö—ñ–¥–Ω–∏–π —Ç–µ–∫—Å—Ç¬ª —Ç–∞ ¬´–ê–Ω–æ–Ω—ñ–º—ñ–∑–æ–≤–∞–Ω–∏–π —Ç–µ–∫—Å—Ç¬ª, —Å–ø–∏—Å–∫–æ–º –∑–Ω–∞–π–¥–µ–Ω–∏—Ö —Å—É—Ç–Ω–æ—Å—Ç–µ–π —ñ –≤–∫–ª–∞–¥–∫–æ—é –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å –¥–ª—è –≤–∏–±–æ—Ä—É –∞–∫—Ç–∏–≤–Ω–∏—Ö —Ç–∏–ø—ñ–≤ PII.
- –ê–≤—Ç–æ–≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è –ø–æ—Ä—Ç—É –∑–∞–ø—É—Å–∫—É: —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø–µ—Ä–µ–≤—ñ—Ä—è—î `GRADIO_SERVER_PORT`, –¥—ñ–∞–ø–∞–∑–æ–Ω 7860‚Äì7869 —Ç–∞ –ø—Ä–∏ –ø–æ—Ç—Ä–µ–±—ñ –¥–µ–ª–µ–≥—É—î –≤–∏–±—ñ—Ä –≤–∏–ø–∞–¥–∫–æ–≤–æ–≥–æ –ø–æ—Ä—Ç—É —Å–∞–º–æ–º—É Gradio.
- –ú–æ–¥—É–ª—å–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (`core`, `recognizers`, `ui`, `utils`, `test`) —Å–ø—Ä–æ—â—É—î —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è —Ç–∞ –ø—ñ–¥—Ç—Ä–∏–º–∫—É.

## –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞
1. **NER-–∞–Ω–∞–ª—ñ–∑** (`recognizers/ukrainian_ner.py`): spaCy-–ø–∞–π–ø–ª–∞–π–Ω —Ä–æ–∑–ø—ñ–∑–Ω–∞—î —É–∫—Ä–∞—ó–Ω—Å—å–∫—ñ —ñ–º–µ–Ω–æ–≤–∞–Ω—ñ —Å—É—Ç–Ω–æ—Å—Ç—ñ.
2. **Rule-based –∞–Ω–∞–ª—ñ–∑** (`recognizers/presidio_patterns.py`): Presidio Analyzer —à—É–∫–∞—î email, —Ç–µ–ª–µ—Ñ–æ–Ω–∏, IBAN —Ç–æ—â–æ.
3. **–ö–æ–Ω—Ñ–ª—ñ–∫—Ç-—Ä–µ–∑–æ–ª–≤—ñ–Ω–≥** (`utils/conflict_resolution.py`): –ø—Ä–∏–±–∏—Ä–∞—î –ø–µ—Ä–µ–∫—Ä–∏–≤–Ω—ñ —Å—É—Ç–Ω–æ—Å—Ç—ñ, –≤—Ä–∞—Ö–æ–≤—É—é—á–∏ score –∞–±–æ –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç —Ç–∏–ø—É.
4. **–ê–Ω–æ–Ω—ñ–º—ñ–∑–∞—Ü—ñ—è** (`core/analyzer.py`): Presidio Anonymizer –∑–∞—Å—Ç–æ—Å–æ–≤—É—î –æ–ø–µ—Ä–∞—Ç–æ—Ä–∏ –∑ –∫–æ–Ω—Ñ—ñ–≥—É.
5. **UI** (`ui/gradio_interface.py`): Gradio-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø–æ–∫–∞–∑—É—î —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏, –¥–æ–∑–≤–æ–ª—è—î –∑–º—ñ–Ω—é–≤–∞—Ç–∏ –∞–∫—Ç–∏–≤–Ω—ñ —Å—É—Ç–Ω–æ—Å—Ç—ñ —Ç–∞ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—î –∞–Ω–∞–ª—ñ–∑ –æ–¥–Ω–∏–º –∫–ª—ñ–∫–æ–º.

## –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è
1. –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ Python 3.9‚Äì3.12 (—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ 3.11). –î–ª—è Python 3.13 spaCy —â–µ –Ω–µ –ø—É–±–ª—ñ–∫—É—î —Å—É–º—ñ—Å–Ω—ñ –∫–æ–ª–µ—Å–∞ (`blis` –Ω–µ –∑–±–∏—Ä–∞—î—Ç—å—Å—è).
2. –ö–ª–æ–Ω—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π —Ç–∞ –ø–µ—Ä–µ–π–¥—ñ—Ç—å –¥–æ –∫–∞—Ç–∞–ª–æ–≥—É –ø—Ä–æ—î–∫—Ç—É.
3. –°—Ç–≤–æ—Ä—ñ—Ç—å –≤—ñ—Ä—Ç—É–∞–ª—å–Ω–µ —Å–µ—Ä–µ–¥–æ–≤–∏—â–µ –π –∞–∫—Ç–∏–≤—É–π—Ç–µ –π–æ–≥–æ:

   ```bash
   python3 -m venv .venv
   source .venv/bin/activate
   ```

4. –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ:

   ```bash
   pip install -r requirements.txt
   ```

> –ù–∞ macOS –º–æ–∂–ª–∏–≤–µ –ø–æ–ø–µ—Ä–µ–¥–∂–µ–Ω–Ω—è –≤—ñ–¥ `urllib3` —â–æ–¥–æ LibreSSL. –í–æ–Ω–æ –Ω–µ –≤–ø–ª–∏–≤–∞—î –Ω–∞ —Ä–æ–±–æ—Ç—É –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É.

## –ó–∞–ø—É—Å–∫ –¥–µ–º–æ

```bash
python app.py
```

–ó–∞ –ø—Ä–æ–º–æ–≤—á–∞–Ω–Ω—è–º Gradio –Ω–∞–º–∞–≥–∞—Ç–∏–º–µ—Ç—å—Å—è —Å—Ç–∞—Ä—Ç—É–≤–∞—Ç–∏ –Ω–∞ `http://127.0.0.1:7860`. –Ø–∫—â–æ –ø–æ—Ä—Ç –∑–∞–π–Ω—è—Ç–∏–π, —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å –æ–±–µ—Ä–µ –ø–µ—Ä—à–∏–π –≤—ñ–ª—å–Ω–∏–π —É –¥—ñ–∞–ø–∞–∑–æ–Ω—ñ 7860‚Äì7869 –∞–±–æ –ø–æ–ø—Ä–æ—Å–∏—Ç—å Gradio –ø—ñ–¥—ñ–±—Ä–∞—Ç–∏ –≤–∏–ø–∞–¥–∫–æ–≤–∏–π. –ü–æ—Ç—Ä—ñ–±–µ–Ω –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏–π –ø–æ—Ä—Ç ‚Äî –∑–∞–¥–∞–π—Ç–µ `GRADIO_SERVER_PORT` –∞–±–æ –ø–µ—Ä–µ–¥–∞–π—Ç–µ `server_port` —É `launch()`.

## –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç—ñ–≤

```bash
pytest test/test_analyzer.py
```

–Æ–Ω—ñ—Ç-—Ç–µ—Å—Ç–∏ –ø–æ–∫—Ä–∏–≤–∞—é—Ç—å –≤–∞–ª—ñ–¥–∞—Ü—ñ—é, –∞–Ω–∞–ª—ñ–∑, –∞–Ω–æ–Ω—ñ–º—ñ–∑–∞—Ü—ñ—é —Ç–∞ –∫–æ–Ω—Ñ–ª—ñ–∫—Ç-—Ä–µ–∑–æ–ª–≤—ñ–Ω–≥. –ü—ñ–¥ —á–∞—Å –ø–µ—Ä—à–æ–≥–æ –∑–∞–ø—É—Å–∫—É —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ–π–Ω–∏—Ö —Ç–µ—Å—Ç—ñ–≤ NER –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç—å –º–æ–¥–µ–ª—å —ñ–∑ Hugging Face —Ç–∞ –∫–µ—à—É—î —ó—ó –ª–æ–∫–∞–ª—å–Ω–æ.

## UI —à–≤–∏–¥–∫–∏–π –æ–≥–ª—è–¥
- –£ –≤–∫–ª–∞–¥—Ü—ñ **¬´üîç –ê–Ω–∞–ª—ñ–∑ —Ç–µ–∫—Å—Ç—É¬ª** —Ä–æ–∑—Ç–∞—à–æ–≤–∞–Ω—ñ –ø–æ–ª—è ¬´–í—Ö—ñ–¥–Ω–∏–π —Ç–µ–∫—Å—Ç¬ª —Ç–∞ ¬´üîí –ê–Ω–æ–Ω—ñ–º—ñ–∑–æ–≤–∞–Ω–∏–π —Ç–µ–∫—Å—Ç¬ª –Ω–∞ –æ–¥–Ω–æ–º—É —Ä—ñ–≤–Ω—ñ –¥–ª—è –≤—ñ–∑—É–∞–ª—å–Ω–æ–≥–æ –ø–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è, –Ω–∏–∂—á–µ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—î—Ç—å—Å—è —Å–ø–∏—Å–æ–∫ —Å—É—Ç–Ω–æ—Å—Ç–µ–π.
- –ö–Ω–æ–ø–∫–∞ **¬´üöÄ –î–µ—ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫—É–≤–∞—Ç–∏¬ª** –∑–Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –ø—Ä—è–º–æ –ø—ñ–¥ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—î—é —ñ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—î –∞–Ω–∞–ª—ñ–∑.
- –í–∫–ª–∞–¥–∫–∞ **¬´‚öôÔ∏è –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è¬ª** –¥–æ–∑–≤–æ–ª—è—î –≤–º–∏–∫–∞—Ç–∏/–≤–∏–º–∏–∫–∞—Ç–∏ —Ç–∏–ø–∏ —Å—É—Ç–Ω–æ—Å—Ç–µ–π (–æ–∫—Ä–µ–º–æ –¥–ª—è —É–∫—Ä–∞—ó–Ω—Å—å–∫–æ—ó NER —Ç–∞ Presidio –ø–∞—Ç–µ—Ä–Ω—ñ–≤).

## –ü—ñ–¥—Ç—Ä–∏–º—É–≤–∞–Ω—ñ —Å—É—Ç–Ω–æ—Å—Ç—ñ

- **–£–∫—Ä–∞—ó–Ω—Å—å–∫–∞ NER:** `PERS`, `ORG`, `LOC`, `DATE`, `TIME`, `JOB`, `MON`, `PCT`, `PERIOD`, `DOC`, `QUANT`, `ART`, `MISC`.
- **Presidio –ø–∞—Ç–µ—Ä–Ω–∏:** `EMAIL_ADDRESS`, `PHONE_NUMBER`, `CREDIT_CARD`, `IBAN_CODE`, `IP_ADDRESS`, `URL`, `CRYPTO`, `DATE_TIME`.

–§–æ—Ä–º–∞—Ç –∑–∞–º—ñ–Ω–∏ –Ω–∞–ª–∞—à—Ç–æ–≤—É—î—Ç—å—Å—è —á–µ—Ä–µ–∑ `core/config.py` (–ø–æ–ª–µ `DEFAULT_ANONYMIZATION_FORMAT`) –∞–±–æ –≤ –æ–∫—Ä–µ–º–∏—Ö –æ–ø–µ—Ä–∞—Ç–æ—Ä—ñ–≤.

## –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Ç–∞ —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è
- –î–æ–¥–∞–≤–∞–π—Ç–µ –Ω–æ–≤—ñ –ø–∞—Ç–µ—Ä–Ω–∏ —É `recognizers/presidio_patterns.py` (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –≤–ª–∞—Å–Ω—ñ `PatternRecognizer`).
- –î–ª—è –∑–º—ñ–Ω–∏ –∞–Ω–æ–Ω—ñ–º—ñ–∑–∞—Ü—ñ—ó –º–æ–¥–∏—Ñ—ñ–∫—É–π—Ç–µ `_create_operator` —É `core/analyzer.py` (–ø—ñ–¥—Ç—Ä–∏–º—É—é—Ç—å—Å—è `replace`, `mask`, `hash`, `redact` —Ç–æ—â–æ).
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞ –¥–æ–≤–∂–∏–Ω–∞ —Ç–µ–∫—Å—Ç—É –∑–∞–¥–∞—î—Ç—å—Å—è —É `core/config.py` (`MAX_TEXT_LENGTH`).
- –ó–æ–≤–Ω—ñ—à–Ω—ñ–π –¥–µ–ø–ª–æ–π: –∑–∞–¥–∞–π—Ç–µ `server_name="0.0.0.0"` —ñ (–æ–ø—Ü—ñ–π–Ω–æ) `share=True` –ø—ñ–¥ —á–∞—Å `launch()` —É UI.

## –¢–∏–ø–æ–≤—ñ –ø—Ä–æ–±–ª–µ–º–∏
- **Python 3.13**: –ø–æ–≤–µ—Ä–Ω—ñ—Ç—å—Å—è –Ω–∞ 3.12 –∞–±–æ 3.11 —ñ –ø–µ—Ä–µ–≤—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ (`blis` –Ω–∞—Ä–∞–∑—ñ –Ω–µ—Å—É–º—ñ—Å–Ω–∏–π).
- **Hugging Face –ø–æ—Ç—Ä–µ–±—É—î –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó**: –≤–∏–∫–æ–Ω–∞–π—Ç–µ `huggingface-cli login` —É –∞–∫—Ç–∏–≤–Ω–æ–º—É —Å–µ—Ä–µ–¥–æ–≤–∏—â—ñ.
- **–ì–ª—é–∫–∏ –∑—ñ spaCy –º–æ–¥–µ–ª–ª—é**: –∑–∞–ø—É—Å—Ç—ñ—Ç—å `python -m spacy validate` –∞–±–æ –ø–µ—Ä–µ–≤—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –º–æ–¥–µ–ª—å.
- **–ü–æ—Ä—Ç –∑–∞–π–Ω—è—Ç–∏–π**: –∑–∞–¥–∞–π—Ç–µ `GRADIO_SERVER_PORT=<port>` –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º –∞–±–æ –¥–æ–≤—ñ—Ä—Ç–µ—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ–º—É –ø—ñ–¥–±–æ—Ä—É.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ—î–∫—Ç—É

```
‚îú‚îÄ‚îÄ app.py                  # –¢–æ—á–∫–∞ –≤—Ö–æ–¥—É, –∫–æ–Ω—Ñ—ñ–≥—É—Ä—É—î —Ç–∞ –∑–∞–ø—É—Å–∫–∞—î Gradio UI
‚îú‚îÄ‚îÄ core/
‚îÇ   ‚îú‚îÄ‚îÄ analyzer.py         # HybridAnalyzer, –≤–∞–ª—ñ–¥–∞—Ü—ñ—è, –∞–Ω–æ–Ω—ñ–º—ñ–∑–∞—Ü—ñ—è
‚îÇ   ‚îî‚îÄ‚îÄ config.py           # –ì–ª–æ–±–∞–ª—å–Ω–∏–π –∫–æ–Ω—Ñ—ñ–≥ (—Å—É—Ç–Ω–æ—Å—Ç—ñ, –ª—ñ–º—ñ—Ç–∏, —Ñ–æ—Ä–º–∞—Ç)
‚îú‚îÄ‚îÄ recognizers/
‚îÇ   ‚îú‚îÄ‚îÄ ukrainian_ner.py    # –û–±–≥–æ—Ä—Ç–∫–∞ –Ω–∞–¥ —É–∫—Ä–∞—ó–Ω—Å—å–∫–æ—é spaCy –º–æ–¥–µ–ª–ª—é
‚îÇ   ‚îî‚îÄ‚îÄ presidio_patterns.py# Presidio Analyzer + –∫–∞—Å—Ç–æ–º–Ω—ñ –ø–∞—Ç–µ—Ä–Ω–∏
‚îú‚îÄ‚îÄ ui/
‚îÇ   ‚îî‚îÄ‚îÄ gradio_interface.py # UI-–ª–æ–≥—ñ–∫–∞, –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è, –∑–∞–ø—É—Å–∫
‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îî‚îÄ‚îÄ conflict_resolution.py # –ê–ª–≥–æ—Ä–∏—Ç–º–∏ –∑–ª–∏—Ç—Ç—è —Å—É—Ç–Ω–æ—Å—Ç–µ–π
‚îú‚îÄ‚îÄ test/
‚îÇ   ‚îî‚îÄ‚îÄ test_analyzer.py    # –ù–∞–±—ñ—Ä pytest-—Ç–µ—Å—Ç—ñ–≤
‚îú‚îÄ‚îÄ requirements.txt        # –ó–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ (—É —Ç.—á. pytest –¥–ª—è dev)
‚îî‚îÄ‚îÄ README.md               # –¶–µ–π –¥–æ–∫—É–º–µ–Ω—Ç
```

## –õ—ñ—Ü–µ–Ω–∑—ñ—è —Ç–∞ –∞–≤—Ç–æ—Ä—Å—Ç–≤–æ

–ü—Ä–æ—î–∫—Ç –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–∏–π –¥–ª—è –¥–æ—Å–ª—ñ–¥–∂–µ–Ω—å —Ç–∞ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—ó —Ä–æ–±–æ—Ç–∏ –∑ —É–∫—Ä–∞—ó–Ω—Å—å–∫–∏–º–∏ PII. –î–æ—Ç—Ä–∏–º—É–π—Ç–µ—Å—å –ª—ñ—Ü–µ–Ω–∑—ñ–π Hugging Face –º–æ–¥–µ–ª—ñ, spaCy, Presidio —Ç–∞ —ñ–Ω—à–∏—Ö –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π –ø–µ—Ä–µ–¥ –ø—Ä–æ–¥–∞–∫—à–µ–Ω-–≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è–º.
